<include file="public@header" />
</head>
<body>
	<div class="wrap">
		<ul class="nav nav-tabs">
			<li ><a href="{:url('official/log')}">通知记录</a></li>
			<li class="active"><a >通知{:lang('ADD')}</a></li>
		</ul>
		<form method="post" class="form-horizontal js-ajax-form margin-top-20" action="{:url('official/addPost')}">

            <div class="form-group">
				<label for="input-name" class="col-sm-2 control-label"><span class="form-required">*</span>消息标题</label>
				<div class="col-md-6 col-sm-10">
					<input type="text" class="form-control" id="input-name" name="title">
				</div>
			</div>
            <div class="form-group" style="display: none;">
				<label for="input-name" class="col-sm-2 control-label"><span class="form-required">*</span>消息标题</label>
				<div class="col-md-6 col-sm-10">
					<input type="text" class="form-control" id="input-admin" name="push_user" value="{$admin.user_nicename}">
				</div>
			</div>
            <div class="form-group">
				<label for="input-name" class="col-sm-2 control-label"><span class="form-required">*</span>消息简介</label>
				<div class="col-md-6 col-sm-10">
					<input type="text" class="form-control" id="input-category-title" name="introduction">
				</div>
			</div>
			<div class="form-group">
				<label for="input-msg_type" class="col-sm-2 control-label">消息类型</label>
				<div class="col-md-6 col-sm-10">
					<label class="radio-inline"><input type="radio" name="type" value="1" checked="">文本类型</label>
					<label class="radio-inline"><input type="radio" name="type" value="2">外部链接</label>
				</div>
			</div>
			<div class="form-group" id="msg_con">
				<label for="input-msg_type" class="col-sm-2 control-label">消息内容</label>
				<div class="col-md-6 col-sm-10">
					<script type="text/javascript" charset="utf-8" src="__STATIC__/js/ueditor/ueditor.config.js"></script>
					<script type="text/javascript" charset="utf-8" src="__STATIC__/js/ueditor/ueditor.all.min.js"> </script>
					<!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
					<!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
					<script type="text/javascript" charset="utf-8" src="__STATIC__/js/ueditor/lang/zh-cn/zh-cn.js"></script>
					<script id="editor" type="text/plain" name="content" style="width: 100%;height: 350px"></script>
					<script type="text/javascript">
						//实例化编辑器
						var ue = UE.getEditor('editor', {
							allowDivTransToP: false, // 禁止<div>转换为<p>
							allowTagSemicolon: true, // 允许分号在标签中使用
							initialContent: '', // 初始内容
							autoClearinitialContent: true, // 是否自动清除编辑器初始内容，注意：如果粘贴的
							removeFormatTags: 'b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var', // 移除的标签
							// 更多配置...
						});
					</script>
				</div>
			</div>
			<div class="form-group" id="linkUrl" style="display: none;">
				<label for="input-url" class="col-sm-2 control-label">外部链接</label>
				<div class="col-md-6 col-sm-10">
					<input type="text" class="form-control" name="url" id="url">
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-offset-2 col-sm-10">
					<button type="submit" class="btn btn-primary js-ajax-submit">{:lang('ADD')}</button>
					<a class="btn btn-default" href="javascript:history.back(-1);">{:lang('BACK')}</a>
				</div>
			</div>
            
		</form>
	</div>
	<script src="__STATIC__/js/admin.js"></script>
	<script>
		//切换消息类型
		$("input[name='type']").click(function(){
			var val=$(this).val();
			if(val==1){
				$("#linkUrl").hide();
				$("#msg_con").show();
			}else{
				$("#msg_con").hide();
				$("#linkUrl").show();
			}
		});
	</script>
</body>
</html>
